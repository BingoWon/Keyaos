#:schema node_modules/wrangler/config-schema.json

name = "keyaos"
main = "worker/index.ts"
compatibility_date = "2025-12-01"
compatibility_flags = ["nodejs_compat"]

[vars]
ADMIN_TOKEN = "admin"    # Core auth: change this! Used as Bearer token for dashboard + API.
CNY_USD_RATE = "7"       # CNY → USD exchange rate (used for DeepSeek balance conversion)
# Platform mode (optional): secrets via `wrangler secret put` or .dev.vars
# Secrets: CLERK_SECRET_KEY, STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET
# Frontend env: VITE_CLERK_PUBLISHABLE_KEY (set in .env.local, not here — Vite handles it)

[assets]
directory = "./dist"
binding = "ASSETS"

[[d1_databases]]
binding = "DB"
database_name = "keyaos-db"
database_id = "YOUR_D1_DATABASE_ID_HERE"      # Replace after: npx wrangler d1 create keyaos-db
migrations_dir = "migrations"

[triggers]
crons = ["*/5 * * * *"]
