# Error Codes

When a request fails, Keyaos returns a standard HTTP error response with a JSON body.

## Response Format

```json
{
  "error": {
    "message": "Detailed error description",
    "type": "error_type",
    "code": "error_code"
  }
}
```

## HTTP Status Codes

### Client Errors (4xx)

| Code | Meaning | Common Cause |
|------|---------|-------------|
| `400` | Bad Request | Invalid JSON, missing required fields |
| `401` | Unauthorized | Invalid or missing API key |
| `402` | Payment Required | Insufficient credits |
| `403` | Forbidden | API key lacks permission for this resource |
| `404` | Not Found | Invalid endpoint or model not available |
| `429` | Rate Limited | Too many requests — retry after backoff |

### Server Errors (5xx)

| Code | Meaning | Common Cause |
|------|---------|-------------|
| `500` | Internal Error | Unexpected server error |
| `502` | Bad Gateway | Upstream provider returned an invalid response |
| `503` | Service Unavailable | All upstream candidates failed for this model |
| `504` | Gateway Timeout | Upstream provider timed out |

## Troubleshooting

### 401 — Check your API key

```bash
# Verify your key works
curl https://your-gateway.workers.dev/v1/models \
  -H "Authorization: Bearer key-xxxxxxxx"
```

If this returns a model list, your key is valid. If not, generate a new key from the [API Keys page](/dashboard/api-keys).

### 402 — Top up your credits

Your credit balance is too low. Visit the [Billing page](/dashboard/billing) to add credits.

### 503 — No available credentials

This means all upstream credentials for the requested model have failed. Possible causes:

- No credentials are configured for this model's providers
- All credentials are in `dead` health status (expired or depleted)
- Provider filtering (`provider` field) excluded all available options

**Fix:** Check the [BYOK page](/dashboard/byok) to ensure you have active, healthy credentials.

### 429 — Rate limiting

The upstream provider is rate-limiting your requests. Keyaos will automatically try the next available credential, but if all are rate-limited, the 429 is returned to you.

**Fix:** Wait and retry with exponential backoff, or add more credentials from different providers.
